{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://wodis.dev/schema/1.0.0/wodis.schema.json",
  "title": "Workout Open Data Interchange Specification (WODIS)",
  "description": "A portable, human-readable, machine-parseable format for logging resistance-training sessions. This schema defines the structure of a single workout session including exercises, sets, and optional per-rep data.",
  "type": "object",
  "required": ["wodis_version", "meta", "session"],
  "additionalProperties": true,
  "properties": {
    "wodis_version": {
      "type": "string",
      "enum": ["1.0.0"],
      "description": "The version of the WODIS specification this document conforms to."
    },
    "meta": {
      "$ref": "#/$defs/meta",
      "description": "Metadata about the recording source, athlete, and entry method."
    },
    "session": {
      "$ref": "#/$defs/session",
      "description": "The workout session containing exercises and sets."
    }
  },
  "$defs": {
    "meta": {
      "title": "Meta",
      "description": "Metadata about how the session was recorded, who performed it, and which application produced the data.",
      "type": "object",
      "required": ["source"],
      "additionalProperties": true,
      "properties": {
        "source": {
          "type": "string",
          "description": "The application or method that originally recorded this session (e.g. 'strong', 'hevy', 'fitbod')."
        },
        "entry_method": {
          "type": "string",
          "enum": ["manual", "device_sync", "imported_csv"],
          "description": "How the data was entered into the source application."
        },
        "athlete": {
          "type": "string",
          "description": "Display name or identifier for the person who performed the workout."
        },
        "_extra": {
          "type": "object",
          "additionalProperties": true,
          "description": "App-specific extension data. MUST be preserved on round-trip import/export."
        }
      }
    },
    "session": {
      "title": "Session",
      "description": "A single workout session, anchored by a start time and containing one or more exercises.",
      "type": "object",
      "required": ["started_at", "exercises"],
      "additionalProperties": true,
      "properties": {
        "started_at": {
          "type": "string",
          "format": "date-time",
          "description": "ISO 8601 date-time when the session began."
        },
        "ended_at": {
          "type": "string",
          "format": "date-time",
          "description": "ISO 8601 date-time when the session ended."
        },
        "location": {
          "type": "string",
          "description": "Name or description of the gym or location where the session took place."
        },
        "split_type": {
          "type": "string",
          "description": "Training split label for this session (e.g. 'push', 'pull', 'legs', 'upper', 'full body')."
        },
        "exercises": {
          "type": "array",
          "minItems": 1,
          "items": {
            "$ref": "#/$defs/exercise"
          },
          "description": "Ordered list of exercises performed during this session."
        },
        "notes": {
          "type": "string",
          "description": "Free-text notes about the session as a whole."
        },
        "_extra": {
          "type": "object",
          "additionalProperties": true,
          "description": "App-specific extension data. MUST be preserved on round-trip import/export."
        }
      }
    },
    "exercise": {
      "title": "Exercise",
      "description": "A single exercise performed during a session, containing one or more sets.",
      "type": "object",
      "required": ["display_name", "started_at", "sets"],
      "additionalProperties": true,
      "properties": {
        "display_name": {
          "type": "string",
          "description": "Human-readable name of the exercise as shown in the source app (e.g. 'Bench Press (Barbell)')."
        },
        "started_at": {
          "type": "string",
          "format": "date-time",
          "description": "ISO 8601 date-time when this exercise began within the session."
        },
        "sets": {
          "type": "array",
          "minItems": 1,
          "items": {
            "$ref": "#/$defs/set"
          },
          "description": "Ordered list of sets performed for this exercise."
        },
        "canonical_ids": {
          "type": "object",
          "additionalProperties": true,
          "description": "Map of namespace to canonical exercise identifier (e.g. {\"wger\": \"192\", \"exrx\": \"bench-press-barbell\"})."
        },
        "muscle_groups": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "List of primary muscle groups targeted by this exercise (e.g. ['chest', 'triceps', 'anterior_deltoid'])."
        },
        "variation": {
          "type": "string",
          "description": "Specific variation or modifier for the exercise (e.g. 'incline', 'close-grip', 'pause')."
        },
        "notes": {
          "type": "string",
          "description": "Free-text notes about this exercise."
        },
        "_extra": {
          "type": "object",
          "additionalProperties": true,
          "description": "App-specific extension data. MUST be preserved on round-trip import/export."
        }
      }
    },
    "set": {
      "title": "Set",
      "description": "A single set within an exercise, recording reps completed, load used, and optional metadata like RPE, RIR, and form flags.",
      "type": "object",
      "required": ["reps_completed", "load_kg"],
      "additionalProperties": true,
      "properties": {
        "reps_completed": {
          "type": "integer",
          "minimum": 0,
          "description": "Number of repetitions completed in this set."
        },
        "load_kg": {
          "type": "number",
          "description": "Load in kilograms used for this set. Negative values indicate assisted weight (e.g. assisted pull-ups)."
        },
        "reps": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/rep"
          },
          "description": "Optional per-rep breakdown with individual load and completion data."
        },
        "set_type": {
          "type": "string",
          "enum": ["working", "warmup", "dropset", "failure", "backoff", "amrap"],
          "description": "Classification of this set's purpose within the exercise."
        },
        "rpe": {
          "type": "number",
          "minimum": 1,
          "maximum": 10,
          "description": "Rate of Perceived Exertion on the Borg CR-10 scale (1 = very easy, 10 = maximal effort)."
        },
        "rir": {
          "type": "number",
          "minimum": 0,
          "maximum": 5,
          "description": "Reps In Reserve â€” estimated number of additional reps that could have been performed."
        },
        "rest_seconds_actual": {
          "type": "number",
          "minimum": 0,
          "description": "Actual rest time in seconds taken after the previous set before this set began."
        },
        "is_failure": {
          "type": "boolean",
          "description": "Whether the set was taken to muscular failure."
        },
        "form_flags": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Tags indicating form deviations observed during the set (e.g. ['hip_shift', 'shortened_rom'])."
        },
        "superset_id": {
          "type": "string",
          "description": "Identifier grouping sets that are performed as part of the same superset."
        },
        "superset_sequence": {
          "type": "integer",
          "minimum": 1,
          "description": "Order of this set within the superset (1-based)."
        },
        "transition_time_seconds": {
          "type": "number",
          "minimum": 0,
          "description": "Time in seconds to transition between exercises within a superset."
        },
        "timestamp": {
          "type": "string",
          "format": "date-time",
          "description": "ISO 8601 date-time when this individual set was performed."
        },
        "notes": {
          "type": "string",
          "description": "Free-text notes about this set."
        },
        "_extra": {
          "type": "object",
          "additionalProperties": true,
          "description": "App-specific extension data. MUST be preserved on round-trip import/export."
        }
      }
    },
    "rep": {
      "title": "Rep",
      "description": "Per-repetition data capturing individual rep load and completion status for detailed tracking.",
      "type": "object",
      "required": ["load_kg"],
      "additionalProperties": true,
      "properties": {
        "load_kg": {
          "type": "number",
          "description": "Load in kilograms for this specific repetition (useful for drop-within-set or variable-load protocols)."
        },
        "assisted": {
          "type": "boolean",
          "description": "Whether this rep was performed with external assistance (e.g. spotter help)."
        },
        "partial": {
          "type": "boolean",
          "description": "Whether this rep used a partial range of motion rather than full ROM."
        },
        "completed": {
          "type": "boolean",
          "description": "Whether this rep was completed successfully through the intended range of motion."
        }
      }
    }
  }
}
